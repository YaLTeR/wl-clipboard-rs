<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source of the Rust file `&#x2F;home&#x2F;travis&#x2F;build&#x2F;YaLTeR&#x2F;wl-clipboard-rs&#x2F;target&#x2F;debug&#x2F;build&#x2F;wayland-protocols-e921f3ab1b54292b&#x2F;out&#x2F;wlr-data-control-v1_server_api.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>wlr-data-control-v1_server_api.rs - source</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../../../../../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../../../../../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../../../../../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../../../../../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../../../../../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../../../../../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../../../../../../../../../../storage.js"></script><script src="../../../../../../../../../../../../crates.js"></script><script defer src="../../../../../../../../../../../../main.js"></script><script defer src="../../../../../../../../../../../../source-script.js"></script><script defer src="../../../../../../../../../../../../source-files.js"></script>
    <noscript><link rel="stylesheet" href="../../../../../../../../../../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../../../../../../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../../../../../../../../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../../../../../../../../../../favicon.svg"></head><body class="rustdoc source"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../../../../../../../../../../../../wayland_protocols/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../../../../../../../../../rust-logo.png" alt="logo"></div>
        </a></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../../../../../../../../../../wayland_protocols/index.html"><img class="rust-logo" src="../../../../../../../../../../../../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../../../../../../../../../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../../../../../../../../../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../../../../../../../../../../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="example-wrap"><pre class="line-numbers"><span id="1">1</span>
</pre><pre class="rust"><code><span class="kw">use</span> <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: { <span class="ident">c_char</span> , <span class="ident">c_void</span> } ; <span class="kw">const</span> <span class="ident">NULLPTR</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_void</span> <span class="op">=</span> <span class="number">0</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_void</span> ; <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">types_null</span> : [<span class="op">*</span> <span class="kw">const</span> <span class="ident">sys</span> :: <span class="ident">common</span> :: <span class="ident">wl_interface</span> ; <span class="number">2</span>] <span class="op">=</span> [<span class="ident">NULLPTR</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">sys</span> :: <span class="ident">common</span> :: <span class="ident">wl_interface</span> , <span class="ident">NULLPTR</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">sys</span> :: <span class="ident">common</span> :: <span class="ident">wl_interface</span> ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;manager to control data devices\n\nThis interface is a manager that allows creating per-seat data device\ncontrols.&quot;</span>] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zwlr_data_control_manager_v1</span> { <span class="kw">use</span> <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ; <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Resource</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">Main</span> , <span class="ident">smallvec</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> , <span class="ident">types_null</span> , <span class="ident">NULLPTR</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_argument</span> , <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> , <span class="ident">wl_message</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">server</span> :: <span class="op">*</span> ; # [<span class="ident">derive</span> (<span class="ident">Debug</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;create a new data source\n\nCreate a new data source.&quot;</span>] <span class="ident">CreateDataSource</span> { <span class="ident">id</span> : <span class="ident">Main</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_source_v1</span> :: <span class="ident">ZwlrDataControlSourceV1</span> <span class="op">&gt;</span> , } , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;get a data device for a seat\n\nCreate a data device that can be used to manage a seat&#39;s selection.&quot;</span>] <span class="ident">GetDataDevice</span> { <span class="ident">id</span> : <span class="ident">Main</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_device_v1</span> :: <span class="ident">ZwlrDataControlDeviceV1</span> <span class="op">&gt;</span> , <span class="ident">seat</span> : <span class="kw">super</span> :: <span class="ident">wl_seat</span> :: <span class="ident">WlSeat</span> , } , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the manager\n\nAll objects created by the manager will still remain valid, until their\nappropriate destroy request has been called.\n\nThis is a destructor, once received this object cannot be used any longer.&quot;</span>] <span class="ident">Destroy</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span>] <span class="op">=</span> <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;create_data_source&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">NewId</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;get_data_device&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">NewId</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroy&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [] , <span class="ident">destructor</span> : <span class="bool-val">true</span> , } ,] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ResourceMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="bool-val">true</span> , <span class="kw">_</span> =&gt; <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">CreateDataSource</span> { .. } =&gt; <span class="number">0</span> , <span class="ident">Request</span> :: <span class="ident">GetDataDevice</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="number">2</span> , } } <span class="kw">fn</span> <span class="ident">since</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">CreateDataSource</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Request</span> :: <span class="ident">GetDataDevice</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> (<span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> =&gt; <span class="prelude-val">Some</span> (<span class="ident">Object</span> :: <span class="ident">from_interface</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_source_v1</span> :: <span class="ident">ZwlrDataControlSourceV1</span> <span class="op">&gt;</span> (<span class="ident">version</span> , <span class="ident">meta</span> . <span class="ident">child</span> () ,)) , <span class="number">1</span> =&gt; <span class="prelude-val">Some</span> (<span class="ident">Object</span> :: <span class="ident">from_interface</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_device_v1</span> :: <span class="ident">ZwlrDataControlDeviceV1</span> <span class="op">&gt;</span> (<span class="ident">version</span> , <span class="ident">meta</span> . <span class="ident">child</span> () ,)) , <span class="kw">_</span> =&gt; <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span>) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , () <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="number">0</span> =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> () ; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">CreateDataSource</span> { <span class="ident">id</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> (<span class="ident">Argument</span> :: <span class="ident">NewId</span> (<span class="ident">val</span>)) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> () { <span class="ident">map</span> . <span class="ident">get_new</span> (<span class="ident">val</span>) . <span class="ident">ok_or</span> (()) <span class="question-mark">?</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> (()) ; } } , }) } , <span class="number">1</span> =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> () ; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">GetDataDevice</span> { <span class="ident">id</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> (<span class="ident">Argument</span> :: <span class="ident">NewId</span> (<span class="ident">val</span>)) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> () { <span class="ident">map</span> . <span class="ident">get_new</span> (<span class="ident">val</span>) . <span class="ident">ok_or</span> (()) <span class="question-mark">?</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> (()) ; } } , <span class="ident">seat</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> (<span class="ident">Argument</span> :: <span class="ident">Object</span> (<span class="ident">val</span>)) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> () { <span class="ident">map</span> . <span class="ident">get</span> (<span class="ident">val</span>) . <span class="ident">ok_or</span> (()) <span class="question-mark">?</span> . <span class="ident">into</span> () } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> (()) ; } } , }) } , <span class="number">2</span> =&gt; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">Destroy</span>) , <span class="kw">_</span> =&gt; <span class="prelude-val">Err</span> (()) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> (<span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span>) -&gt; <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Request::into_raw can not be used Server-side.&quot;</span>) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> (<span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> ,) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , () <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> =&gt; { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> (<span class="ident">args</span> , <span class="number">1</span>) ; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">CreateDataSource</span> { <span class="ident">id</span> : { <span class="kw">let</span> <span class="ident">me</span> <span class="op">=</span> <span class="ident">Resource</span> :: <span class="op">&lt;</span> <span class="ident">ZwlrDataControlManagerV1</span> <span class="op">&gt;</span> :: <span class="ident">from_c_ptr</span> (<span class="ident">obj</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span>) ; <span class="ident">me</span> . <span class="ident">make_child_for</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_source_v1</span> :: <span class="ident">ZwlrDataControlSourceV1</span> <span class="op">&gt;</span> (<span class="ident">_args</span> [<span class="number">0</span>] . <span class="ident">n</span>) . <span class="ident">unwrap</span> () } , }) } , <span class="number">1</span> =&gt; { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> (<span class="ident">args</span> , <span class="number">2</span>) ; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">GetDataDevice</span> { <span class="ident">id</span> : { <span class="kw">let</span> <span class="ident">me</span> <span class="op">=</span> <span class="ident">Resource</span> :: <span class="op">&lt;</span> <span class="ident">ZwlrDataControlManagerV1</span> <span class="op">&gt;</span> :: <span class="ident">from_c_ptr</span> (<span class="ident">obj</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span>) ; <span class="ident">me</span> . <span class="ident">make_child_for</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_device_v1</span> :: <span class="ident">ZwlrDataControlDeviceV1</span> <span class="op">&gt;</span> (<span class="ident">_args</span> [<span class="number">0</span>] . <span class="ident">n</span>) . <span class="ident">unwrap</span> () } , <span class="ident">seat</span> : <span class="ident">Resource</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">wl_seat</span> :: <span class="ident">WlSeat</span> <span class="op">&gt;</span> :: <span class="ident">from_c_ptr</span> (<span class="ident">_args</span> [<span class="number">1</span>] . <span class="ident">o</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ,) . <span class="ident">into</span> () , }) } , <span class="number">2</span> =&gt; { <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">Destroy</span>) } , <span class="kw">_</span> =&gt; <span class="kw">return</span> <span class="prelude-val">Err</span> (()) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> (<span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span>) -&gt; <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> (<span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [<span class="ident">wl_argument</span>]) -&gt; <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Request::as_raw_c_in can not be used Server-side.&quot;</span>) } } # [<span class="ident">derive</span> (<span class="ident">Debug</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span>] <span class="op">=</span> <span class="op">&amp;</span> [] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ResourceMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { } } <span class="kw">fn</span> <span class="ident">opcode</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { } } <span class="kw">fn</span> <span class="ident">since</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> (<span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> =&gt; <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span>) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , () <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Event::from_raw can not be used Server-side.&quot;</span>) } <span class="kw">fn</span> <span class="ident">into_raw</span> (<span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span>) -&gt; <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> (<span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> ,) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , () <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Event::from_raw_c can not be used Server-side.&quot;</span>) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> (<span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span>) -&gt; <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> (<span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [<span class="ident">wl_argument</span>]) -&gt; <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { } } } # [<span class="ident">derive</span> (<span class="ident">Clone</span> , <span class="ident">Eq</span> , <span class="ident">PartialEq</span>)] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZwlrDataControlManagerV1</span> (<span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlManagerV1</span> <span class="op">&gt;</span>) ; <span class="kw">impl</span> <span class="ident">AsRef</span> <span class="op">&lt;</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlManagerV1</span> <span class="op">&gt;</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlManagerV1</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">as_ref</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="op">&amp;</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="self">Self</span> <span class="op">&gt;</span> { <span class="op">&amp;</span> <span class="self">self</span> . <span class="number">0</span> } } <span class="kw">impl</span> <span class="ident">From</span> <span class="op">&lt;</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlManagerV1</span> <span class="op">&gt;</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlManagerV1</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">from</span> (<span class="ident">value</span> : <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="self">Self</span> <span class="op">&gt;</span>) -&gt; <span class="self">Self</span> { <span class="ident">ZwlrDataControlManagerV1</span> (<span class="ident">value</span>) } } <span class="kw">impl</span> <span class="ident">From</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlManagerV1</span> <span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlManagerV1</span> <span class="op">&gt;</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">from</span> (<span class="ident">value</span> : <span class="ident">ZwlrDataControlManagerV1</span>) -&gt; <span class="self">Self</span> { <span class="ident">value</span> . <span class="number">0</span> } } <span class="kw">impl</span> <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="ident">Debug</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlManagerV1</span> { <span class="kw">fn</span> <span class="ident">fmt</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">f</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="ident">Formatter</span> <span class="op">&lt;</span> <span class="lifetime">&#39;_</span> <span class="op">&gt;</span>) -&gt; <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="prelude-ty">Result</span> { <span class="ident">f</span> . <span class="ident">write_fmt</span> (<span class="ident">format_args</span> <span class="op">!</span> (<span class="string">&quot;{:?}&quot;</span> , <span class="self">self</span> . <span class="number">0</span>)) } } <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlManagerV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zwlr_data_control_manager_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> () -&gt; <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_manager_v1_interface</span> } } } <span class="kw">impl</span> <span class="ident">ZwlrDataControlManagerV1</span> { } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_CREATE_DATA_SOURCE_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_GET_DATA_DEVICE_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_DESTROY_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_manager_v1_requests_create_data_source_types</span> : [<span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> ; <span class="number">1</span>] <span class="op">=</span> [<span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_source_v1</span> :: <span class="ident">zwlr_data_control_source_v1_interface</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> } ,] ; <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_manager_v1_requests_get_data_device_types</span> : [<span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> ; <span class="number">2</span>] <span class="op">=</span> [<span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_device_v1</span> :: <span class="ident">zwlr_data_control_device_v1_interface</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> } , <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">wl_seat</span> :: <span class="ident">wl_seat_interface</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C-representation of the messages of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_manager_v1_requests</span> : [<span class="ident">wl_message</span> ; <span class="number">3</span>] <span class="op">=</span> [<span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;create_data_source\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;n\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_manager_v1_requests_create_data_source_types</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;get_data_device\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;no\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_manager_v1_requests_get_data_device_types</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;destroy\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C representation of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_manager_v1_interface</span> : <span class="ident">wl_interface</span> <span class="op">=</span> <span class="ident">wl_interface</span> { <span class="ident">name</span> : <span class="string">b&quot;zwlr_data_control_manager_v1\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">version</span> : <span class="number">2</span> , <span class="ident">request_count</span> : <span class="number">3</span> , <span class="ident">requests</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_manager_v1_requests</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , <span class="ident">event_count</span> : <span class="number">0</span> , <span class="ident">events</span> : <span class="ident">NULLPTR</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_message</span> , } ; } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;manage a data device for a seat\n\nThis interface allows a client to manage a seat&#39;s selection.\n\nWhen the seat is destroyed, this object becomes inert.&quot;</span>] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zwlr_data_control_device_v1</span> { <span class="kw">use</span> <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ; <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Resource</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">Main</span> , <span class="ident">smallvec</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> , <span class="ident">types_null</span> , <span class="ident">NULLPTR</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_argument</span> , <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> , <span class="ident">wl_message</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">server</span> :: <span class="op">*</span> ; # [<span class="ident">repr</span> (<span class="ident">u32</span>)] # [<span class="ident">derive</span> (<span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">Debug</span> , <span class="ident">PartialEq</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;source given to set_selection or set_primary_selection was already used before&quot;</span>] <span class="ident">UsedSource</span> <span class="op">=</span> <span class="number">1</span> , } <span class="kw">impl</span> <span class="ident">Error</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">n</span> : <span class="ident">u32</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Error</span> <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">n</span> { <span class="number">1</span> =&gt; <span class="prelude-val">Some</span> (<span class="ident">Error</span> :: <span class="ident">UsedSource</span>) , <span class="kw">_</span> =&gt; <span class="prelude-ty">Option</span> :: <span class="prelude-val">None</span> } } <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="op">*</span> <span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span> } } # [<span class="ident">derive</span> (<span class="ident">Debug</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;copy data to the selection\n\nThis request asks the compositor to set the selection to the data from\nthe source on behalf of the client.\n\nThe given source may not be used in any further set_selection or\nset_primary_selection requests. Attempting to use a previously used\nsource is a protocol error.\n\nTo unset the selection, set the source to NULL.&quot;</span>] <span class="ident">SetSelection</span> { <span class="ident">source</span> : <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_source_v1</span> :: <span class="ident">ZwlrDataControlSourceV1</span> <span class="op">&gt;</span> , } , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy this data device\n\nDestroys the data device object.\n\nThis is a destructor, once received this object cannot be used any longer.&quot;</span>] <span class="ident">Destroy</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;copy data to the primary selection\n\nThis request asks the compositor to set the primary selection to the\ndata from the source on behalf of the client.\n\nThe given source may not be used in any further set_selection or\nset_primary_selection requests. Attempting to use a previously used\nsource is a protocol error.\n\nTo unset the primary selection, set the source to NULL.\n\nThe compositor will ignore this request if it does not support primary\nselection.\n\nOnly available since version 2 of the interface&quot;</span>] <span class="ident">SetPrimarySelection</span> { <span class="ident">source</span> : <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_source_v1</span> :: <span class="ident">ZwlrDataControlSourceV1</span> <span class="op">&gt;</span> , } , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span>] <span class="op">=</span> <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;set_selection&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroy&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [] , <span class="ident">destructor</span> : <span class="bool-val">true</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;set_primary_selection&quot;</span> , <span class="ident">since</span> : <span class="number">2</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } ,] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ResourceMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="bool-val">true</span> , <span class="kw">_</span> =&gt; <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">SetSelection</span> { .. } =&gt; <span class="number">0</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="number">1</span> , <span class="ident">Request</span> :: <span class="ident">SetPrimarySelection</span> { .. } =&gt; <span class="number">2</span> , } } <span class="kw">fn</span> <span class="ident">since</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">SetSelection</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="number">1</span> , <span class="ident">Request</span> :: <span class="ident">SetPrimarySelection</span> { .. } =&gt; <span class="number">2</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> (<span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> =&gt; <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span>) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , () <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="number">0</span> =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> () ; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">SetSelection</span> { <span class="ident">source</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> (<span class="ident">Argument</span> :: <span class="ident">Object</span> (<span class="ident">val</span>)) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> () { <span class="kw">if</span> <span class="ident">val</span> <span class="op">==</span> <span class="number">0</span> { <span class="prelude-val">None</span> } <span class="kw">else</span> { <span class="prelude-val">Some</span> (<span class="ident">map</span> . <span class="ident">get</span> (<span class="ident">val</span>) . <span class="ident">ok_or</span> (()) <span class="question-mark">?</span> . <span class="ident">into</span> ()) } } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> (()) ; } } , }) } , <span class="number">1</span> =&gt; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">Destroy</span>) , <span class="number">2</span> =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> () ; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">SetPrimarySelection</span> { <span class="ident">source</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> (<span class="ident">Argument</span> :: <span class="ident">Object</span> (<span class="ident">val</span>)) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> () { <span class="kw">if</span> <span class="ident">val</span> <span class="op">==</span> <span class="number">0</span> { <span class="prelude-val">None</span> } <span class="kw">else</span> { <span class="prelude-val">Some</span> (<span class="ident">map</span> . <span class="ident">get</span> (<span class="ident">val</span>) . <span class="ident">ok_or</span> (()) <span class="question-mark">?</span> . <span class="ident">into</span> ()) } } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> (()) ; } } , }) } , <span class="kw">_</span> =&gt; <span class="prelude-val">Err</span> (()) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> (<span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span>) -&gt; <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Request::into_raw can not be used Server-side.&quot;</span>) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> (<span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> ,) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , () <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> =&gt; { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> (<span class="ident">args</span> , <span class="number">1</span>) ; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">SetSelection</span> { <span class="ident">source</span> : <span class="kw">if</span> <span class="ident">_args</span> [<span class="number">0</span>] . <span class="ident">o</span> . <span class="ident">is_null</span> () { <span class="prelude-val">None</span> } <span class="kw">else</span> { <span class="prelude-val">Some</span> (<span class="ident">Resource</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_source_v1</span> :: <span class="ident">ZwlrDataControlSourceV1</span> <span class="op">&gt;</span> :: <span class="ident">from_c_ptr</span> (<span class="ident">_args</span> [<span class="number">0</span>] . <span class="ident">o</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ,) . <span class="ident">into</span> ()) } , }) } , <span class="number">1</span> =&gt; { <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">Destroy</span>) } , <span class="number">2</span> =&gt; { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> (<span class="ident">args</span> , <span class="number">1</span>) ; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">SetPrimarySelection</span> { <span class="ident">source</span> : <span class="kw">if</span> <span class="ident">_args</span> [<span class="number">0</span>] . <span class="ident">o</span> . <span class="ident">is_null</span> () { <span class="prelude-val">None</span> } <span class="kw">else</span> { <span class="prelude-val">Some</span> (<span class="ident">Resource</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_source_v1</span> :: <span class="ident">ZwlrDataControlSourceV1</span> <span class="op">&gt;</span> :: <span class="ident">from_c_ptr</span> (<span class="ident">_args</span> [<span class="number">0</span>] . <span class="ident">o</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ,) . <span class="ident">into</span> ()) } , }) } , <span class="kw">_</span> =&gt; <span class="kw">return</span> <span class="prelude-val">Err</span> (()) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> (<span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span>) -&gt; <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> (<span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [<span class="ident">wl_argument</span>]) -&gt; <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Request::as_raw_c_in can not be used Server-side.&quot;</span>) } } # [<span class="ident">derive</span> (<span class="ident">Debug</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;introduce a new wlr_data_control_offer\n\nThe data_offer event introduces a new wlr_data_control_offer object,\nwhich will subsequently be used in either the\nwlr_data_control_device.selection event (for the regular clipboard\nselections) or the wlr_data_control_device.primary_selection event (for\nthe primary clipboard selections). Immediately following the\nwlr_data_control_device.data_offer event, the new data_offer object\nwill send out wlr_data_control_offer.offer events to describe the MIME\ntypes it offers.&quot;</span>] <span class="ident">DataOffer</span> { <span class="ident">id</span> : <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_offer_v1</span> :: <span class="ident">ZwlrDataControlOfferV1</span> <span class="op">&gt;</span> , } , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;advertise new selection\n\nThe selection event is sent out to notify the client of a new\nwlr_data_control_offer for the selection for this device. The\nwlr_data_control_device.data_offer and the wlr_data_control_offer.offer\nevents are sent out immediately before this event to introduce the data\noffer object. The selection event is sent to a client when a new\nselection is set. The wlr_data_control_offer is valid until a new\nwlr_data_control_offer or NULL is received. The client must destroy the\nprevious selection wlr_data_control_offer, if any, upon receiving this\nevent.\n\nThe first selection event is sent upon binding the\nwlr_data_control_device object.&quot;</span>] <span class="ident">Selection</span> { <span class="ident">id</span> : <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_offer_v1</span> :: <span class="ident">ZwlrDataControlOfferV1</span> <span class="op">&gt;</span> , } , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;this data control is no longer valid\n\nThis data control object is no longer valid and should be destroyed by\nthe client.&quot;</span>] <span class="ident">Finished</span> , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;advertise new primary selection\n\nThe primary_selection event is sent out to notify the client of a new\nwlr_data_control_offer for the primary selection for this device. The\nwlr_data_control_device.data_offer and the wlr_data_control_offer.offer\nevents are sent out immediately before this event to introduce the data\noffer object. The primary_selection event is sent to a client when a\nnew primary selection is set. The wlr_data_control_offer is valid until\na new wlr_data_control_offer or NULL is received. The client must\ndestroy the previous primary selection wlr_data_control_offer, if any,\nupon receiving this event.\n\nIf the compositor supports primary selection, the first\nprimary_selection event is sent upon binding the\nwlr_data_control_device object.\n\nOnly available since version 2 of the interface&quot;</span>] <span class="ident">PrimarySelection</span> { <span class="ident">id</span> : <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_offer_v1</span> :: <span class="ident">ZwlrDataControlOfferV1</span> <span class="op">&gt;</span> , } , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span>] <span class="op">=</span> <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;data_offer&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">NewId</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;selection&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;finished&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;primary_selection&quot;</span> , <span class="ident">since</span> : <span class="number">2</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } ,] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ResourceMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="kw">_</span> =&gt; <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">DataOffer</span> { .. } =&gt; <span class="number">0</span> , <span class="ident">Event</span> :: <span class="ident">Selection</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Event</span> :: <span class="ident">Finished</span> =&gt; <span class="number">2</span> , <span class="ident">Event</span> :: <span class="ident">PrimarySelection</span> { .. } =&gt; <span class="number">3</span> , } } <span class="kw">fn</span> <span class="ident">since</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">DataOffer</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Event</span> :: <span class="ident">Selection</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Event</span> :: <span class="ident">Finished</span> =&gt; <span class="number">1</span> , <span class="ident">Event</span> :: <span class="ident">PrimarySelection</span> { .. } =&gt; <span class="number">2</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> (<span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> =&gt; <span class="prelude-val">Some</span> (<span class="ident">Object</span> :: <span class="ident">from_interface</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_offer_v1</span> :: <span class="ident">ZwlrDataControlOfferV1</span> <span class="op">&gt;</span> (<span class="ident">version</span> , <span class="ident">meta</span> . <span class="ident">child</span> () ,)) , <span class="kw">_</span> =&gt; <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span>) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , () <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Event::from_raw can not be used Server-side.&quot;</span>) } <span class="kw">fn</span> <span class="ident">into_raw</span> (<span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span>) -&gt; <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">DataOffer</span> { <span class="ident">id</span> } =&gt; <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">smallvec</span> <span class="op">!</span> [<span class="ident">Argument</span> :: <span class="ident">NewId</span> (<span class="ident">id</span> . <span class="ident">id</span> ()) ,] , } , <span class="ident">Event</span> :: <span class="ident">Selection</span> { <span class="ident">id</span> } =&gt; <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">1</span> , <span class="ident">args</span> : <span class="ident">smallvec</span> <span class="op">!</span> [<span class="ident">Argument</span> :: <span class="ident">Object</span> (<span class="ident">id</span> . <span class="ident">map</span> (<span class="op">|</span> <span class="ident">o</span> <span class="op">|</span> <span class="ident">o</span> . <span class="ident">as_ref</span> () . <span class="ident">id</span> ()) . <span class="ident">unwrap_or</span> (<span class="number">0</span>)) ,] , } , <span class="ident">Event</span> :: <span class="ident">Finished</span> =&gt; <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">2</span> , <span class="ident">args</span> : <span class="ident">smallvec</span> <span class="op">!</span> [] , } , <span class="ident">Event</span> :: <span class="ident">PrimarySelection</span> { <span class="ident">id</span> } =&gt; <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">3</span> , <span class="ident">args</span> : <span class="ident">smallvec</span> <span class="op">!</span> [<span class="ident">Argument</span> :: <span class="ident">Object</span> (<span class="ident">id</span> . <span class="ident">map</span> (<span class="op">|</span> <span class="ident">o</span> <span class="op">|</span> <span class="ident">o</span> . <span class="ident">as_ref</span> () . <span class="ident">id</span> ()) . <span class="ident">unwrap_or</span> (<span class="number">0</span>)) ,] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> (<span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> ,) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , () <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Event::from_raw_c can not be used Server-side.&quot;</span>) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> (<span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span>) -&gt; <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> (<span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [<span class="ident">wl_argument</span>]) -&gt; <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">DataOffer</span> { <span class="ident">id</span> } =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [<span class="ident">wl_argument</span> ; <span class="number">1</span>] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } ; <span class="ident">_args_array</span> [<span class="number">0</span>] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">id</span> . <span class="ident">c_ptr</span> () <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ; <span class="ident">f</span> (<span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span>) } , <span class="ident">Event</span> :: <span class="ident">Selection</span> { <span class="ident">id</span> } =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [<span class="ident">wl_argument</span> ; <span class="number">1</span>] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } ; <span class="ident">_args_array</span> [<span class="number">0</span>] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">id</span> . <span class="ident">map</span> (<span class="op">|</span> <span class="ident">o</span> <span class="op">|</span> <span class="ident">o</span> . <span class="ident">as_ref</span> () . <span class="ident">c_ptr</span> () <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span>) . <span class="ident">unwrap_or</span> (:: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null_mut</span> ()) ; <span class="ident">f</span> (<span class="number">1</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span>) } , <span class="ident">Event</span> :: <span class="ident">Finished</span> =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [<span class="ident">wl_argument</span> ; <span class="number">0</span>] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } ; <span class="ident">f</span> (<span class="number">2</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span>) } , <span class="ident">Event</span> :: <span class="ident">PrimarySelection</span> { <span class="ident">id</span> } =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [<span class="ident">wl_argument</span> ; <span class="number">1</span>] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } ; <span class="ident">_args_array</span> [<span class="number">0</span>] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">id</span> . <span class="ident">map</span> (<span class="op">|</span> <span class="ident">o</span> <span class="op">|</span> <span class="ident">o</span> . <span class="ident">as_ref</span> () . <span class="ident">c_ptr</span> () <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span>) . <span class="ident">unwrap_or</span> (:: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null_mut</span> ()) ; <span class="ident">f</span> (<span class="number">3</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span>) } , } } } # [<span class="ident">derive</span> (<span class="ident">Clone</span> , <span class="ident">Eq</span> , <span class="ident">PartialEq</span>)] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZwlrDataControlDeviceV1</span> (<span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlDeviceV1</span> <span class="op">&gt;</span>) ; <span class="kw">impl</span> <span class="ident">AsRef</span> <span class="op">&lt;</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlDeviceV1</span> <span class="op">&gt;</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlDeviceV1</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">as_ref</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="op">&amp;</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="self">Self</span> <span class="op">&gt;</span> { <span class="op">&amp;</span> <span class="self">self</span> . <span class="number">0</span> } } <span class="kw">impl</span> <span class="ident">From</span> <span class="op">&lt;</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlDeviceV1</span> <span class="op">&gt;</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlDeviceV1</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">from</span> (<span class="ident">value</span> : <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="self">Self</span> <span class="op">&gt;</span>) -&gt; <span class="self">Self</span> { <span class="ident">ZwlrDataControlDeviceV1</span> (<span class="ident">value</span>) } } <span class="kw">impl</span> <span class="ident">From</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlDeviceV1</span> <span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlDeviceV1</span> <span class="op">&gt;</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">from</span> (<span class="ident">value</span> : <span class="ident">ZwlrDataControlDeviceV1</span>) -&gt; <span class="self">Self</span> { <span class="ident">value</span> . <span class="number">0</span> } } <span class="kw">impl</span> <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="ident">Debug</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlDeviceV1</span> { <span class="kw">fn</span> <span class="ident">fmt</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">f</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="ident">Formatter</span> <span class="op">&lt;</span> <span class="lifetime">&#39;_</span> <span class="op">&gt;</span>) -&gt; <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="prelude-ty">Result</span> { <span class="ident">f</span> . <span class="ident">write_fmt</span> (<span class="ident">format_args</span> <span class="op">!</span> (<span class="string">&quot;{:?}&quot;</span> , <span class="self">self</span> . <span class="number">0</span>)) } } <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlDeviceV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zwlr_data_control_device_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">2</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> () -&gt; <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_device_v1_interface</span> } } } <span class="kw">impl</span> <span class="ident">ZwlrDataControlDeviceV1</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;introduce a new wlr_data_control_offer\n\nThe data_offer event introduces a new wlr_data_control_offer object,\nwhich will subsequently be used in either the\nwlr_data_control_device.selection event (for the regular clipboard\nselections) or the wlr_data_control_device.primary_selection event (for\nthe primary clipboard selections). Immediately following the\nwlr_data_control_device.data_offer event, the new data_offer object\nwill send out wlr_data_control_offer.offer events to describe the MIME\ntypes it offers.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">data_offer</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">id</span> : <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_offer_v1</span> :: <span class="ident">ZwlrDataControlOfferV1</span>) -&gt; () { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Event</span> :: <span class="ident">DataOffer</span> { <span class="ident">id</span> : <span class="ident">id</span> . <span class="ident">as_ref</span> () . <span class="ident">clone</span> () } ; <span class="self">self</span> . <span class="number">0</span> . <span class="ident">send</span> (<span class="ident">msg</span>) ; } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;advertise new selection\n\nThe selection event is sent out to notify the client of a new\nwlr_data_control_offer for the selection for this device. The\nwlr_data_control_device.data_offer and the wlr_data_control_offer.offer\nevents are sent out immediately before this event to introduce the data\noffer object. The selection event is sent to a client when a new\nselection is set. The wlr_data_control_offer is valid until a new\nwlr_data_control_offer or NULL is received. The client must destroy the\nprevious selection wlr_data_control_offer, if any, upon receiving this\nevent.\n\nThe first selection event is sent upon binding the\nwlr_data_control_device object.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">selection</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">id</span> : <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_offer_v1</span> :: <span class="ident">ZwlrDataControlOfferV1</span> <span class="op">&gt;</span>) -&gt; () { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Event</span> :: <span class="ident">Selection</span> { <span class="ident">id</span> : <span class="ident">id</span> . <span class="ident">map</span> (<span class="op">|</span> <span class="ident">o</span> <span class="op">|</span> <span class="ident">o</span> . <span class="ident">clone</span> ()) } ; <span class="self">self</span> . <span class="number">0</span> . <span class="ident">send</span> (<span class="ident">msg</span>) ; } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;this data control is no longer valid\n\nThis data control object is no longer valid and should be destroyed by\nthe client.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">finished</span> (<span class="op">&amp;</span> <span class="self">self</span> ,) -&gt; () { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Event</span> :: <span class="ident">Finished</span> ; <span class="self">self</span> . <span class="number">0</span> . <span class="ident">send</span> (<span class="ident">msg</span>) ; } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;advertise new primary selection\n\nThe primary_selection event is sent out to notify the client of a new\nwlr_data_control_offer for the primary selection for this device. The\nwlr_data_control_device.data_offer and the wlr_data_control_offer.offer\nevents are sent out immediately before this event to introduce the data\noffer object. The primary_selection event is sent to a client when a\nnew primary selection is set. The wlr_data_control_offer is valid until\na new wlr_data_control_offer or NULL is received. The client must\ndestroy the previous primary selection wlr_data_control_offer, if any,\nupon receiving this event.\n\nIf the compositor supports primary selection, the first\nprimary_selection event is sent upon binding the\nwlr_data_control_device object.\n\nOnly available since version 2 of the interface.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">primary_selection</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">id</span> : <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_offer_v1</span> :: <span class="ident">ZwlrDataControlOfferV1</span> <span class="op">&gt;</span>) -&gt; () { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Event</span> :: <span class="ident">PrimarySelection</span> { <span class="ident">id</span> : <span class="ident">id</span> . <span class="ident">map</span> (<span class="op">|</span> <span class="ident">o</span> <span class="op">|</span> <span class="ident">o</span> . <span class="ident">clone</span> ()) } ; <span class="self">self</span> . <span class="number">0</span> . <span class="ident">send</span> (<span class="ident">msg</span>) ; } } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_SET_SELECTION_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_DESTROY_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_SET_PRIMARY_SELECTION_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">2u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_DATA_OFFER_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_SELECTION_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_FINISHED_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_PRIMARY_SELECTION_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">2u32</span> ; <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_device_v1_requests_set_selection_types</span> : [<span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> ; <span class="number">1</span>] <span class="op">=</span> [<span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_source_v1</span> :: <span class="ident">zwlr_data_control_source_v1_interface</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> } ,] ; <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_device_v1_requests_set_primary_selection_types</span> : [<span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> ; <span class="number">1</span>] <span class="op">=</span> [<span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_source_v1</span> :: <span class="ident">zwlr_data_control_source_v1_interface</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C-representation of the messages of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_device_v1_requests</span> : [<span class="ident">wl_message</span> ; <span class="number">3</span>] <span class="op">=</span> [<span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;set_selection\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;?o\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_device_v1_requests_set_selection_types</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;destroy\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;set_primary_selection\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;2?o\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_device_v1_requests_set_primary_selection_types</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ,] ; <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_device_v1_events_data_offer_types</span> : [<span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> ; <span class="number">1</span>] <span class="op">=</span> [<span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_offer_v1</span> :: <span class="ident">zwlr_data_control_offer_v1_interface</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> } ,] ; <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_device_v1_events_selection_types</span> : [<span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> ; <span class="number">1</span>] <span class="op">=</span> [<span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_offer_v1</span> :: <span class="ident">zwlr_data_control_offer_v1_interface</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> } ,] ; <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_device_v1_events_primary_selection_types</span> : [<span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> ; <span class="number">1</span>] <span class="op">=</span> [<span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">zwlr_data_control_offer_v1</span> :: <span class="ident">zwlr_data_control_offer_v1_interface</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C-representation of the messages of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_device_v1_events</span> : [<span class="ident">wl_message</span> ; <span class="number">4</span>] <span class="op">=</span> [<span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;data_offer\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;n\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_device_v1_events_data_offer_types</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;selection\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;?o\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_device_v1_events_selection_types</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;finished\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;primary_selection\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;2?o\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_device_v1_events_primary_selection_types</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C representation of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_device_v1_interface</span> : <span class="ident">wl_interface</span> <span class="op">=</span> <span class="ident">wl_interface</span> { <span class="ident">name</span> : <span class="string">b&quot;zwlr_data_control_device_v1\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">version</span> : <span class="number">2</span> , <span class="ident">request_count</span> : <span class="number">3</span> , <span class="ident">requests</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_device_v1_requests</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , <span class="ident">event_count</span> : <span class="number">4</span> , <span class="ident">events</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_device_v1_events</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ; } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;offer to transfer data\n\nThe wlr_data_control_source object is the source side of a\nwlr_data_control_offer. It is created by the source client in a data\ntransfer and provides a way to describe the offered data and a way to\nrespond to requests to transfer the data.&quot;</span>] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zwlr_data_control_source_v1</span> { <span class="kw">use</span> <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ; <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Resource</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">Main</span> , <span class="ident">smallvec</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> , <span class="ident">types_null</span> , <span class="ident">NULLPTR</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_argument</span> , <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> , <span class="ident">wl_message</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">server</span> :: <span class="op">*</span> ; # [<span class="ident">repr</span> (<span class="ident">u32</span>)] # [<span class="ident">derive</span> (<span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">Debug</span> , <span class="ident">PartialEq</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;offer sent after wlr_data_control_device.set_selection&quot;</span>] <span class="ident">InvalidOffer</span> <span class="op">=</span> <span class="number">1</span> , } <span class="kw">impl</span> <span class="ident">Error</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">n</span> : <span class="ident">u32</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Error</span> <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">n</span> { <span class="number">1</span> =&gt; <span class="prelude-val">Some</span> (<span class="ident">Error</span> :: <span class="ident">InvalidOffer</span>) , <span class="kw">_</span> =&gt; <span class="prelude-ty">Option</span> :: <span class="prelude-val">None</span> } } <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="op">*</span> <span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span> } } # [<span class="ident">derive</span> (<span class="ident">Debug</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;add an offered MIME type\n\nThis request adds a MIME type to the set of MIME types advertised to\ntargets. Can be called several times to offer multiple types.\n\nCalling this after wlr_data_control_device.set_selection is a protocol\nerror.&quot;</span>] <span class="ident">Offer</span> { <span class="ident">mime_type</span> : <span class="ident">String</span> , } , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy this source\n\nDestroys the data source object.\n\nThis is a destructor, once received this object cannot be used any longer.&quot;</span>] <span class="ident">Destroy</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span>] <span class="op">=</span> <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;offer&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Str</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroy&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [] , <span class="ident">destructor</span> : <span class="bool-val">true</span> , } ,] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ResourceMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="bool-val">true</span> , <span class="kw">_</span> =&gt; <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Offer</span> { .. } =&gt; <span class="number">0</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">since</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Offer</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> (<span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> =&gt; <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span>) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , () <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="number">0</span> =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> () ; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">Offer</span> { <span class="ident">mime_type</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> (<span class="ident">Argument</span> :: <span class="ident">Str</span> (<span class="ident">val</span>)) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> () { <span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">String</span> :: <span class="ident">from_utf8</span> (<span class="ident">val</span> . <span class="ident">into_bytes</span> ()) . <span class="ident">unwrap_or_else</span> (<span class="op">|</span> <span class="ident">e</span> <span class="op">|</span> <span class="ident">String</span> :: <span class="ident">from_utf8_lossy</span> (<span class="op">&amp;</span> <span class="ident">e</span> . <span class="ident">into_bytes</span> ()) . <span class="ident">into</span> ()) ; <span class="ident">s</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> (()) ; } } , }) } , <span class="number">1</span> =&gt; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">Destroy</span>) , <span class="kw">_</span> =&gt; <span class="prelude-val">Err</span> (()) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> (<span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span>) -&gt; <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Request::into_raw can not be used Server-side.&quot;</span>) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> (<span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> ,) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , () <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> =&gt; { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> (<span class="ident">args</span> , <span class="number">1</span>) ; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">Offer</span> { <span class="ident">mime_type</span> : :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CStr</span> :: <span class="ident">from_ptr</span> (<span class="ident">_args</span> [<span class="number">0</span>] . <span class="ident">s</span>) . <span class="ident">to_string_lossy</span> () . <span class="ident">into_owned</span> () , }) } , <span class="number">1</span> =&gt; { <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">Destroy</span>) } , <span class="kw">_</span> =&gt; <span class="kw">return</span> <span class="prelude-val">Err</span> (()) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> (<span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span>) -&gt; <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> (<span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [<span class="ident">wl_argument</span>]) -&gt; <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Request::as_raw_c_in can not be used Server-side.&quot;</span>) } } # [<span class="ident">derive</span> (<span class="ident">Debug</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;send the data\n\nRequest for data from the client. Send the data as the specified MIME\ntype over the passed file descriptor, then close it.&quot;</span>] <span class="ident">Send</span> { <span class="ident">mime_type</span> : <span class="ident">String</span> , <span class="ident">fd</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">unix</span> :: <span class="ident">io</span> :: <span class="ident">RawFd</span> , } , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;selection was cancelled\n\nThis data source is no longer valid. The data source has been replaced\nby another data source.\n\nThe client should clean up and destroy this data source.&quot;</span>] <span class="ident">Cancelled</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span>] <span class="op">=</span> <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;send&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Str</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Fd</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;cancelled&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } ,] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ResourceMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="kw">_</span> =&gt; <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Send</span> { .. } =&gt; <span class="number">0</span> , <span class="ident">Event</span> :: <span class="ident">Cancelled</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">since</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Send</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Event</span> :: <span class="ident">Cancelled</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> (<span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> =&gt; <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span>) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , () <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Event::from_raw can not be used Server-side.&quot;</span>) } <span class="kw">fn</span> <span class="ident">into_raw</span> (<span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span>) -&gt; <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Send</span> { <span class="ident">mime_type</span> , <span class="ident">fd</span> } =&gt; <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">smallvec</span> <span class="op">!</span> [<span class="ident">Argument</span> :: <span class="ident">Str</span> (<span class="ident">Box</span> :: <span class="ident">new</span> (<span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CString</span> :: <span class="ident">from_vec_unchecked</span> (<span class="ident">mime_type</span> . <span class="ident">into</span> ()) })) , <span class="ident">Argument</span> :: <span class="ident">Fd</span> (<span class="ident">fd</span>) ,] , } , <span class="ident">Event</span> :: <span class="ident">Cancelled</span> =&gt; <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">1</span> , <span class="ident">args</span> : <span class="ident">smallvec</span> <span class="op">!</span> [] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> (<span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> ,) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , () <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Event::from_raw_c can not be used Server-side.&quot;</span>) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> (<span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span>) -&gt; <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> (<span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [<span class="ident">wl_argument</span>]) -&gt; <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Send</span> { <span class="ident">mime_type</span> , <span class="ident">fd</span> } =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [<span class="ident">wl_argument</span> ; <span class="number">2</span>] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } ; <span class="kw">let</span> <span class="ident">_arg_0</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CString</span> :: <span class="ident">new</span> (<span class="ident">mime_type</span>) . <span class="ident">unwrap</span> () ; <span class="ident">_args_array</span> [<span class="number">0</span>] . <span class="ident">s</span> <span class="op">=</span> <span class="ident">_arg_0</span> . <span class="ident">as_ptr</span> () ; <span class="ident">_args_array</span> [<span class="number">1</span>] . <span class="ident">h</span> <span class="op">=</span> <span class="ident">fd</span> ; <span class="ident">f</span> (<span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span>) } , <span class="ident">Event</span> :: <span class="ident">Cancelled</span> =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [<span class="ident">wl_argument</span> ; <span class="number">0</span>] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } ; <span class="ident">f</span> (<span class="number">1</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span>) } , } } } # [<span class="ident">derive</span> (<span class="ident">Clone</span> , <span class="ident">Eq</span> , <span class="ident">PartialEq</span>)] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZwlrDataControlSourceV1</span> (<span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlSourceV1</span> <span class="op">&gt;</span>) ; <span class="kw">impl</span> <span class="ident">AsRef</span> <span class="op">&lt;</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlSourceV1</span> <span class="op">&gt;</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlSourceV1</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">as_ref</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="op">&amp;</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="self">Self</span> <span class="op">&gt;</span> { <span class="op">&amp;</span> <span class="self">self</span> . <span class="number">0</span> } } <span class="kw">impl</span> <span class="ident">From</span> <span class="op">&lt;</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlSourceV1</span> <span class="op">&gt;</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlSourceV1</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">from</span> (<span class="ident">value</span> : <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="self">Self</span> <span class="op">&gt;</span>) -&gt; <span class="self">Self</span> { <span class="ident">ZwlrDataControlSourceV1</span> (<span class="ident">value</span>) } } <span class="kw">impl</span> <span class="ident">From</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlSourceV1</span> <span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlSourceV1</span> <span class="op">&gt;</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">from</span> (<span class="ident">value</span> : <span class="ident">ZwlrDataControlSourceV1</span>) -&gt; <span class="self">Self</span> { <span class="ident">value</span> . <span class="number">0</span> } } <span class="kw">impl</span> <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="ident">Debug</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlSourceV1</span> { <span class="kw">fn</span> <span class="ident">fmt</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">f</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="ident">Formatter</span> <span class="op">&lt;</span> <span class="lifetime">&#39;_</span> <span class="op">&gt;</span>) -&gt; <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="prelude-ty">Result</span> { <span class="ident">f</span> . <span class="ident">write_fmt</span> (<span class="ident">format_args</span> <span class="op">!</span> (<span class="string">&quot;{:?}&quot;</span> , <span class="self">self</span> . <span class="number">0</span>)) } } <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlSourceV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zwlr_data_control_source_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> () -&gt; <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_source_v1_interface</span> } } } <span class="kw">impl</span> <span class="ident">ZwlrDataControlSourceV1</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;send the data\n\nRequest for data from the client. Send the data as the specified MIME\ntype over the passed file descriptor, then close it.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">send</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">mime_type</span> : <span class="ident">String</span> , <span class="ident">fd</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">unix</span> :: <span class="ident">io</span> :: <span class="ident">RawFd</span>) -&gt; () { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Event</span> :: <span class="ident">Send</span> { <span class="ident">mime_type</span> : <span class="ident">mime_type</span> , <span class="ident">fd</span> : <span class="ident">fd</span> } ; <span class="self">self</span> . <span class="number">0</span> . <span class="ident">send</span> (<span class="ident">msg</span>) ; } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;selection was cancelled\n\nThis data source is no longer valid. The data source has been replaced\nby another data source.\n\nThe client should clean up and destroy this data source.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">cancelled</span> (<span class="op">&amp;</span> <span class="self">self</span> ,) -&gt; () { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Event</span> :: <span class="ident">Cancelled</span> ; <span class="self">self</span> . <span class="number">0</span> . <span class="ident">send</span> (<span class="ident">msg</span>) ; } } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_OFFER_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_DESTROY_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_SEND_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_CANCELLED_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C-representation of the messages of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_source_v1_requests</span> : [<span class="ident">wl_message</span> ; <span class="number">2</span>] <span class="op">=</span> [<span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;offer\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;s\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;destroy\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C-representation of the messages of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_source_v1_events</span> : [<span class="ident">wl_message</span> ; <span class="number">2</span>] <span class="op">=</span> [<span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;send\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;sh\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;cancelled\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C representation of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_source_v1_interface</span> : <span class="ident">wl_interface</span> <span class="op">=</span> <span class="ident">wl_interface</span> { <span class="ident">name</span> : <span class="string">b&quot;zwlr_data_control_source_v1\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">version</span> : <span class="number">1</span> , <span class="ident">request_count</span> : <span class="number">2</span> , <span class="ident">requests</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_source_v1_requests</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , <span class="ident">event_count</span> : <span class="number">2</span> , <span class="ident">events</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_source_v1_events</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ; } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;offer to transfer data\n\nA wlr_data_control_offer represents a piece of data offered for transfer\nby another client (the source client). The offer describes the different\nMIME types that the data can be converted to and provides the mechanism\nfor transferring the data directly from the source client.&quot;</span>] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zwlr_data_control_offer_v1</span> { <span class="kw">use</span> <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ; <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Resource</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">Main</span> , <span class="ident">smallvec</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> , <span class="ident">types_null</span> , <span class="ident">NULLPTR</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_argument</span> , <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> , <span class="ident">wl_message</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">server</span> :: <span class="op">*</span> ; # [<span class="ident">derive</span> (<span class="ident">Debug</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;request that the data is transferred\n\nTo transfer the offered data, the client issues this request and\nindicates the MIME type it wants to receive. The transfer happens\nthrough the passed file descriptor (typically created with the pipe\nsystem call). The source client writes the data in the MIME type\nrepresentation requested and then closes the file descriptor.\n\nThe receiving client reads from the read end of the pipe until EOF and\nthen closes its end, at which point the transfer is complete.\n\nThis request may happen multiple times for different MIME types.&quot;</span>] <span class="ident">Receive</span> { <span class="ident">mime_type</span> : <span class="ident">String</span> , <span class="ident">fd</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">unix</span> :: <span class="ident">io</span> :: <span class="ident">RawFd</span> , } , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy this offer\n\nDestroys the data offer object.\n\nThis is a destructor, once received this object cannot be used any longer.&quot;</span>] <span class="ident">Destroy</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span>] <span class="op">=</span> <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;receive&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Str</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Fd</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroy&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [] , <span class="ident">destructor</span> : <span class="bool-val">true</span> , } ,] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ResourceMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="bool-val">true</span> , <span class="kw">_</span> =&gt; <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Receive</span> { .. } =&gt; <span class="number">0</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">since</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Receive</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> (<span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> =&gt; <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span>) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , () <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="number">0</span> =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> () ; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">Receive</span> { <span class="ident">mime_type</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> (<span class="ident">Argument</span> :: <span class="ident">Str</span> (<span class="ident">val</span>)) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> () { <span class="kw">let</span> <span class="ident">s</span> <span class="op">=</span> <span class="ident">String</span> :: <span class="ident">from_utf8</span> (<span class="ident">val</span> . <span class="ident">into_bytes</span> ()) . <span class="ident">unwrap_or_else</span> (<span class="op">|</span> <span class="ident">e</span> <span class="op">|</span> <span class="ident">String</span> :: <span class="ident">from_utf8_lossy</span> (<span class="op">&amp;</span> <span class="ident">e</span> . <span class="ident">into_bytes</span> ()) . <span class="ident">into</span> ()) ; <span class="ident">s</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> (()) ; } } , <span class="ident">fd</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> (<span class="ident">Argument</span> :: <span class="ident">Fd</span> (<span class="ident">val</span>)) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> () { <span class="ident">val</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> (()) ; } } , }) } , <span class="number">1</span> =&gt; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">Destroy</span>) , <span class="kw">_</span> =&gt; <span class="prelude-val">Err</span> (()) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> (<span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span>) -&gt; <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Request::into_raw can not be used Server-side.&quot;</span>) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> (<span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> ,) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , () <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> =&gt; { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> (<span class="ident">args</span> , <span class="number">2</span>) ; <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">Receive</span> { <span class="ident">mime_type</span> : :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CStr</span> :: <span class="ident">from_ptr</span> (<span class="ident">_args</span> [<span class="number">0</span>] . <span class="ident">s</span>) . <span class="ident">to_string_lossy</span> () . <span class="ident">into_owned</span> () , <span class="ident">fd</span> : <span class="ident">_args</span> [<span class="number">1</span>] . <span class="ident">h</span> , }) } , <span class="number">1</span> =&gt; { <span class="prelude-val">Ok</span> (<span class="ident">Request</span> :: <span class="ident">Destroy</span>) } , <span class="kw">_</span> =&gt; <span class="kw">return</span> <span class="prelude-val">Err</span> (()) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> (<span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span>) -&gt; <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> (<span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [<span class="ident">wl_argument</span>]) -&gt; <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Request::as_raw_c_in can not be used Server-side.&quot;</span>) } } # [<span class="ident">derive</span> (<span class="ident">Debug</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;advertise offered MIME type\n\nSent immediately after creating the wlr_data_control_offer object.\nOne event per offered MIME type.&quot;</span>] <span class="ident">Offer</span> { <span class="ident">mime_type</span> : <span class="ident">String</span> , } , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span>] <span class="op">=</span> <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;offer&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Str</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } ,] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ResourceMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="kw">_</span> =&gt; <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Offer</span> { .. } =&gt; <span class="number">0</span> , } } <span class="kw">fn</span> <span class="ident">since</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Offer</span> { .. } =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> (<span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> =&gt; <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span>) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , () <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Event::from_raw can not be used Server-side.&quot;</span>) } <span class="kw">fn</span> <span class="ident">into_raw</span> (<span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span>) -&gt; <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Offer</span> { <span class="ident">mime_type</span> } =&gt; <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">smallvec</span> <span class="op">!</span> [<span class="ident">Argument</span> :: <span class="ident">Str</span> (<span class="ident">Box</span> :: <span class="ident">new</span> (<span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CString</span> :: <span class="ident">from_vec_unchecked</span> (<span class="ident">mime_type</span> . <span class="ident">into</span> ()) })) ,] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> (<span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> ,) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , () <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Event::from_raw_c can not be used Server-side.&quot;</span>) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> (<span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span>) -&gt; <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> (<span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [<span class="ident">wl_argument</span>]) -&gt; <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">Offer</span> { <span class="ident">mime_type</span> } =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [<span class="ident">wl_argument</span> ; <span class="number">1</span>] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } ; <span class="kw">let</span> <span class="ident">_arg_0</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">ffi</span> :: <span class="ident">CString</span> :: <span class="ident">new</span> (<span class="ident">mime_type</span>) . <span class="ident">unwrap</span> () ; <span class="ident">_args_array</span> [<span class="number">0</span>] . <span class="ident">s</span> <span class="op">=</span> <span class="ident">_arg_0</span> . <span class="ident">as_ptr</span> () ; <span class="ident">f</span> (<span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span>) } , } } } # [<span class="ident">derive</span> (<span class="ident">Clone</span> , <span class="ident">Eq</span> , <span class="ident">PartialEq</span>)] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZwlrDataControlOfferV1</span> (<span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlOfferV1</span> <span class="op">&gt;</span>) ; <span class="kw">impl</span> <span class="ident">AsRef</span> <span class="op">&lt;</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlOfferV1</span> <span class="op">&gt;</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlOfferV1</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">as_ref</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="op">&amp;</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="self">Self</span> <span class="op">&gt;</span> { <span class="op">&amp;</span> <span class="self">self</span> . <span class="number">0</span> } } <span class="kw">impl</span> <span class="ident">From</span> <span class="op">&lt;</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlOfferV1</span> <span class="op">&gt;</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlOfferV1</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">from</span> (<span class="ident">value</span> : <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="self">Self</span> <span class="op">&gt;</span>) -&gt; <span class="self">Self</span> { <span class="ident">ZwlrDataControlOfferV1</span> (<span class="ident">value</span>) } } <span class="kw">impl</span> <span class="ident">From</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlOfferV1</span> <span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">Resource</span> <span class="op">&lt;</span> <span class="ident">ZwlrDataControlOfferV1</span> <span class="op">&gt;</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">from</span> (<span class="ident">value</span> : <span class="ident">ZwlrDataControlOfferV1</span>) -&gt; <span class="self">Self</span> { <span class="ident">value</span> . <span class="number">0</span> } } <span class="kw">impl</span> <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="ident">Debug</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlOfferV1</span> { <span class="kw">fn</span> <span class="ident">fmt</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">f</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="ident">Formatter</span> <span class="op">&lt;</span> <span class="lifetime">&#39;_</span> <span class="op">&gt;</span>) -&gt; <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="prelude-ty">Result</span> { <span class="ident">f</span> . <span class="ident">write_fmt</span> (<span class="ident">format_args</span> <span class="op">!</span> (<span class="string">&quot;{:?}&quot;</span> , <span class="self">self</span> . <span class="number">0</span>)) } } <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZwlrDataControlOfferV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zwlr_data_control_offer_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> () -&gt; <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_offer_v1_interface</span> } } } <span class="kw">impl</span> <span class="ident">ZwlrDataControlOfferV1</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;advertise offered MIME type\n\nSent immediately after creating the wlr_data_control_offer object.\nOne event per offered MIME type.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">offer</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">mime_type</span> : <span class="ident">String</span>) -&gt; () { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Event</span> :: <span class="ident">Offer</span> { <span class="ident">mime_type</span> : <span class="ident">mime_type</span> } ; <span class="self">self</span> . <span class="number">0</span> . <span class="ident">send</span> (<span class="ident">msg</span>) ; } } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_RECEIVE_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_DESTROY_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_OFFER_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C-representation of the messages of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_offer_v1_requests</span> : [<span class="ident">wl_message</span> ; <span class="number">2</span>] <span class="op">=</span> [<span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;receive\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;sh\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;destroy\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C-representation of the messages of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_offer_v1_events</span> : [<span class="ident">wl_message</span> ; <span class="number">1</span>] <span class="op">=</span> [<span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;offer\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;s\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C representation of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_data_control_offer_v1_interface</span> : <span class="ident">wl_interface</span> <span class="op">=</span> <span class="ident">wl_interface</span> { <span class="ident">name</span> : <span class="string">b&quot;zwlr_data_control_offer_v1\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">version</span> : <span class="number">1</span> , <span class="ident">request_count</span> : <span class="number">2</span> , <span class="ident">requests</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_offer_v1_requests</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , <span class="ident">event_count</span> : <span class="number">1</span> , <span class="ident">events</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_data_control_offer_v1_events</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ; }</code></pre></div>
</section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../../../../../../../../../../../" data-current-crate="wayland_protocols" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0 (9d1b2106e 2022-02-23)" ></div>
</body></html>