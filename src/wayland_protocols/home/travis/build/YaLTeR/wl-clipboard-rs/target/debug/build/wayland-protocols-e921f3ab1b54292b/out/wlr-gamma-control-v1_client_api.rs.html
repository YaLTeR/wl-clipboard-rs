<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source of the Rust file `&#x2F;home&#x2F;travis&#x2F;build&#x2F;YaLTeR&#x2F;wl-clipboard-rs&#x2F;target&#x2F;debug&#x2F;build&#x2F;wayland-protocols-e921f3ab1b54292b&#x2F;out&#x2F;wlr-gamma-control-v1_client_api.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>wlr-gamma-control-v1_client_api.rs - source</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../../../../../../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../../../../../../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../../../../../../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../../../../../../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../../../../../../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../../../../../../../../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../../../../../../../../../../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../../../../../../../../../../../storage.js"></script><script src="../../../../../../../../../../../../crates.js"></script><script defer src="../../../../../../../../../../../../main.js"></script><script defer src="../../../../../../../../../../../../source-script.js"></script><script defer src="../../../../../../../../../../../../source-files.js"></script>
    <noscript><link rel="stylesheet" href="../../../../../../../../../../../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../../../../../../../../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../../../../../../../../../../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../../../../../../../../../../../favicon.svg"></head><body class="rustdoc source"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../../../../../../../../../../../../wayland_protocols/index.html"><div class="logo-container"><img class="rust-logo" src="../../../../../../../../../../../../rust-logo.png" alt="logo"></div>
        </a></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../../../../../../../../../../../wayland_protocols/index.html"><img class="rust-logo" src="../../../../../../../../../../../../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../../../../../../../../../../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../../../../../../../../../../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../../../../../../../../../../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="example-wrap"><pre class="line-numbers"><span id="1">1</span>
</pre><pre class="rust"><code><span class="kw">use</span> <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: { <span class="ident">c_char</span> , <span class="ident">c_void</span> } ; <span class="kw">const</span> <span class="ident">NULLPTR</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_void</span> <span class="op">=</span> <span class="number">0</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_void</span> ; <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">types_null</span> : [<span class="op">*</span> <span class="kw">const</span> <span class="ident">sys</span> :: <span class="ident">common</span> :: <span class="ident">wl_interface</span> ; <span class="number">1</span>] <span class="op">=</span> [<span class="ident">NULLPTR</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">sys</span> :: <span class="ident">common</span> :: <span class="ident">wl_interface</span> ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;manager to create per-output gamma controls\n\nThis interface is a manager that allows creating per-output gamma\ncontrols.&quot;</span>] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zwlr_gamma_control_manager_v1</span> { <span class="kw">use</span> <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ; <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Proxy</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> , <span class="ident">types_null</span> , <span class="ident">NULLPTR</span> , <span class="ident">Main</span> , <span class="ident">smallvec</span> , } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> , <span class="ident">wl_argument</span> , <span class="ident">wl_message</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">client</span> :: <span class="op">*</span> ; # [<span class="ident">derive</span> (<span class="ident">Debug</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;get a gamma control for an output\n\nCreate a gamma control that can be used to adjust gamma tables for the\nprovided output.&quot;</span>] <span class="ident">GetGammaControl</span> { <span class="ident">output</span> : <span class="kw">super</span> :: <span class="ident">wl_output</span> :: <span class="ident">WlOutput</span> , } , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the manager\n\nAll objects created by the manager will still remain valid, until their\nappropriate destroy request has been called.\n\nThis is a destructor, once sent this object cannot be used any longer.&quot;</span>] <span class="ident">Destroy</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span>] <span class="op">=</span> <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;get_gamma_control&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">NewId</span> , <span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Object</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroy&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [] , <span class="ident">destructor</span> : <span class="bool-val">true</span> , } ,] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="bool-val">true</span> , <span class="kw">_</span> =&gt; <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">GetGammaControl</span> { .. } =&gt; <span class="number">0</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">since</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">GetGammaControl</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> (<span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> =&gt; <span class="prelude-val">Some</span> (<span class="ident">Object</span> :: <span class="ident">from_interface</span> :: <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_gamma_control_v1</span> :: <span class="ident">ZwlrGammaControlV1</span> <span class="op">&gt;</span> (<span class="ident">version</span> , <span class="ident">meta</span> . <span class="ident">child</span> () ,)) , <span class="kw">_</span> =&gt; <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span>) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , () <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Request::from_raw can not be used Client-side.&quot;</span>) } <span class="kw">fn</span> <span class="ident">into_raw</span> (<span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span>) -&gt; <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">GetGammaControl</span> { <span class="ident">output</span> } =&gt; <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">smallvec</span> <span class="op">!</span> [<span class="ident">Argument</span> :: <span class="ident">NewId</span> (<span class="number">0</span>) , <span class="ident">Argument</span> :: <span class="ident">Object</span> (<span class="ident">output</span> . <span class="ident">as_ref</span> () . <span class="ident">id</span> ()) ,] , } , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">1</span> , <span class="ident">args</span> : <span class="ident">smallvec</span> <span class="op">!</span> [] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> (<span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> ,) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , () <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Request::from_raw_c can not be used Client-side.&quot;</span>) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> (<span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span>) -&gt; <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> (<span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [<span class="ident">wl_argument</span>]) -&gt; <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">GetGammaControl</span> { <span class="ident">output</span> } =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [<span class="ident">wl_argument</span> ; <span class="number">2</span>] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } ; <span class="ident">_args_array</span> [<span class="number">0</span>] . <span class="ident">o</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">ptr</span> :: <span class="ident">null_mut</span> () <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ; <span class="ident">_args_array</span> [<span class="number">1</span>] . <span class="ident">o</span> <span class="op">=</span> <span class="ident">output</span> . <span class="ident">as_ref</span> () . <span class="ident">c_ptr</span> () <span class="kw">as</span> <span class="op">*</span> <span class="kw-2">mut</span> <span class="kw">_</span> ; <span class="ident">f</span> (<span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span>) } , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [<span class="ident">wl_argument</span> ; <span class="number">0</span>] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } ; <span class="ident">f</span> (<span class="number">1</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span>) } , } } } # [<span class="ident">derive</span> (<span class="ident">Debug</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span>] <span class="op">=</span> <span class="op">&amp;</span> [] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { } } <span class="kw">fn</span> <span class="ident">opcode</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { } } <span class="kw">fn</span> <span class="ident">since</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> (<span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> =&gt; <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span>) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , () <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="kw">_</span> =&gt; <span class="prelude-val">Err</span> (()) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> (<span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span>) -&gt; <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Event::into_raw can not be used Client-side.&quot;</span>) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> (<span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> ,) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , () <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> =&gt; <span class="kw">return</span> <span class="prelude-val">Err</span> (()) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> (<span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span>) -&gt; <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> (<span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [<span class="ident">wl_argument</span>]) -&gt; <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Event::as_raw_c_in can not be used Client-side.&quot;</span>) } } # [<span class="ident">derive</span> (<span class="ident">Clone</span> , <span class="ident">Eq</span> , <span class="ident">PartialEq</span>)] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZwlrGammaControlManagerV1</span> (<span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZwlrGammaControlManagerV1</span> <span class="op">&gt;</span>) ; <span class="kw">impl</span> <span class="ident">AsRef</span> <span class="op">&lt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZwlrGammaControlManagerV1</span> <span class="op">&gt;</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ZwlrGammaControlManagerV1</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">as_ref</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="self">Self</span> <span class="op">&gt;</span> { <span class="op">&amp;</span> <span class="self">self</span> . <span class="number">0</span> } } <span class="kw">impl</span> <span class="ident">From</span> <span class="op">&lt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZwlrGammaControlManagerV1</span> <span class="op">&gt;</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ZwlrGammaControlManagerV1</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">from</span> (<span class="ident">value</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="self">Self</span> <span class="op">&gt;</span>) -&gt; <span class="self">Self</span> { <span class="ident">ZwlrGammaControlManagerV1</span> (<span class="ident">value</span>) } } <span class="kw">impl</span> <span class="ident">From</span> <span class="op">&lt;</span> <span class="ident">ZwlrGammaControlManagerV1</span> <span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZwlrGammaControlManagerV1</span> <span class="op">&gt;</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">from</span> (<span class="ident">value</span> : <span class="ident">ZwlrGammaControlManagerV1</span>) -&gt; <span class="self">Self</span> { <span class="ident">value</span> . <span class="number">0</span> } } <span class="kw">impl</span> <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="ident">Debug</span> <span class="kw">for</span> <span class="ident">ZwlrGammaControlManagerV1</span> { <span class="kw">fn</span> <span class="ident">fmt</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">f</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="ident">Formatter</span> <span class="op">&lt;</span> <span class="lifetime">&#39;_</span> <span class="op">&gt;</span>) -&gt; <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="prelude-ty">Result</span> { <span class="ident">f</span> . <span class="ident">write_fmt</span> (<span class="ident">format_args</span> <span class="op">!</span> (<span class="string">&quot;{:?}&quot;</span> , <span class="self">self</span> . <span class="number">0</span>)) } } <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZwlrGammaControlManagerV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zwlr_gamma_control_manager_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> () -&gt; <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_gamma_control_manager_v1_interface</span> } } } <span class="kw">impl</span> <span class="ident">ZwlrGammaControlManagerV1</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;get a gamma control for an output\n\nCreate a gamma control that can be used to adjust gamma tables for the\nprovided output.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">get_gamma_control</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">output</span> : <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">wl_output</span> :: <span class="ident">WlOutput</span>) -&gt; <span class="ident">Main</span> <span class="op">&lt;</span> <span class="kw">super</span> :: <span class="ident">zwlr_gamma_control_v1</span> :: <span class="ident">ZwlrGammaControlV1</span> <span class="op">&gt;</span> { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">GetGammaControl</span> { <span class="ident">output</span> : <span class="ident">output</span> . <span class="ident">clone</span> () } ; <span class="self">self</span> . <span class="number">0</span> . <span class="ident">send</span> (<span class="ident">msg</span> , <span class="prelude-val">None</span>) . <span class="ident">unwrap</span> () } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy the manager\n\nAll objects created by the manager will still remain valid, until their\nappropriate destroy request has been called.\n\nThis is a destructor, you cannot send requests to this object any longer once this method is called.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span> (<span class="op">&amp;</span> <span class="self">self</span> ,) -&gt; () { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Destroy</span> ; <span class="self">self</span> . <span class="number">0</span> . <span class="ident">send</span> :: <span class="op">&lt;</span> <span class="ident">AnonymousObject</span> <span class="op">&gt;</span> (<span class="ident">msg</span> , <span class="prelude-val">None</span>) ; } } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_GET_GAMMA_CONTROL_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_DESTROY_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_gamma_control_manager_v1_requests_get_gamma_control_types</span> : [<span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> ; <span class="number">2</span>] <span class="op">=</span> [<span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">zwlr_gamma_control_v1</span> :: <span class="ident">zwlr_gamma_control_v1_interface</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> } , <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="kw">super</span> :: <span class="ident">wl_output</span> :: <span class="ident">wl_output_interface</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C-representation of the messages of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_gamma_control_manager_v1_requests</span> : [<span class="ident">wl_message</span> ; <span class="number">2</span>] <span class="op">=</span> [<span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;get_gamma_control\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;no\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_gamma_control_manager_v1_requests_get_gamma_control_types</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;destroy\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C representation of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_gamma_control_manager_v1_interface</span> : <span class="ident">wl_interface</span> <span class="op">=</span> <span class="ident">wl_interface</span> { <span class="ident">name</span> : <span class="string">b&quot;zwlr_gamma_control_manager_v1\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">version</span> : <span class="number">1</span> , <span class="ident">request_count</span> : <span class="number">2</span> , <span class="ident">requests</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_gamma_control_manager_v1_requests</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , <span class="ident">event_count</span> : <span class="number">0</span> , <span class="ident">events</span> : <span class="ident">NULLPTR</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_message</span> , } ; } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;adjust gamma tables for an output\n\nThis interface allows a client to adjust gamma tables for a particular\noutput.\n\nThe client will receive the gamma size, and will then be able to set gamma\ntables. At any time the compositor can send a failed event indicating that\nthis object is no longer valid.\n\nThere can only be at most one gamma control object per output, which\nhas exclusive access to this particular output. When the gamma control\nobject is destroyed, the gamma table is restored to its original value.&quot;</span>] <span class="kw">pub</span> <span class="kw">mod</span> <span class="ident">zwlr_gamma_control_v1</span> { <span class="kw">use</span> <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_char</span> ; <span class="kw">use</span> <span class="kw">super</span> :: { <span class="ident">Proxy</span> , <span class="ident">AnonymousObject</span> , <span class="ident">Interface</span> , <span class="ident">MessageGroup</span> , <span class="ident">MessageDesc</span> , <span class="ident">ArgumentType</span> , <span class="ident">Object</span> , <span class="ident">Message</span> , <span class="ident">Argument</span> , <span class="ident">ObjectMetadata</span> , <span class="ident">types_null</span> , <span class="ident">NULLPTR</span> , <span class="ident">Main</span> , <span class="ident">smallvec</span> , } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">common</span> :: { <span class="ident">wl_interface</span> , <span class="ident">wl_array</span> , <span class="ident">wl_argument</span> , <span class="ident">wl_message</span> } ; <span class="kw">use</span> <span class="kw">super</span> :: <span class="ident">sys</span> :: <span class="ident">client</span> :: <span class="op">*</span> ; # [<span class="ident">repr</span> (<span class="ident">u32</span>)] # [<span class="ident">derive</span> (<span class="ident">Copy</span> , <span class="ident">Clone</span> , <span class="ident">Debug</span> , <span class="ident">PartialEq</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Error</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;invalid gamma tables&quot;</span>] <span class="ident">InvalidGamma</span> <span class="op">=</span> <span class="number">1</span> , } <span class="kw">impl</span> <span class="ident">Error</span> { <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">n</span> : <span class="ident">u32</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Error</span> <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">n</span> { <span class="number">1</span> =&gt; <span class="prelude-val">Some</span> (<span class="ident">Error</span> :: <span class="ident">InvalidGamma</span>) , <span class="kw">_</span> =&gt; <span class="prelude-ty">Option</span> :: <span class="prelude-val">None</span> } } <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">to_raw</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="op">*</span> <span class="self">self</span> <span class="kw">as</span> <span class="ident">u32</span> } } # [<span class="ident">derive</span> (<span class="ident">Debug</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Request</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;set the gamma table\n\nSet the gamma table. The file descriptor can be memory-mapped to provide\nthe raw gamma table, which contains successive gamma ramps for the red,\ngreen and blue channels. Each gamma ramp is an array of 16-byte unsigned\nintegers which has the same length as the gamma size.\n\nThe file descriptor data must have the same length as three times the\ngamma size.&quot;</span>] <span class="ident">SetGamma</span> { <span class="ident">fd</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">unix</span> :: <span class="ident">io</span> :: <span class="ident">RawFd</span> , } , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy this control\n\nDestroys the gamma control object. If the object is still valid, this\nrestores the original gamma tables.\n\nThis is a destructor, once sent this object cannot be used any longer.&quot;</span>] <span class="ident">Destroy</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Request</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span>] <span class="op">=</span> <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;set_gamma&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Fd</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;destroy&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [] , <span class="ident">destructor</span> : <span class="bool-val">true</span> , } ,] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="bool-val">true</span> , <span class="kw">_</span> =&gt; <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">SetGamma</span> { .. } =&gt; <span class="number">0</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">since</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">SetGamma</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> (<span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> =&gt; <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span>) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , () <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Request::from_raw can not be used Client-side.&quot;</span>) } <span class="kw">fn</span> <span class="ident">into_raw</span> (<span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span>) -&gt; <span class="ident">Message</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">SetGamma</span> { <span class="ident">fd</span> } =&gt; <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">0</span> , <span class="ident">args</span> : <span class="ident">smallvec</span> <span class="op">!</span> [<span class="ident">Argument</span> :: <span class="ident">Fd</span> (<span class="ident">fd</span>) ,] , } , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; <span class="ident">Message</span> { <span class="ident">sender_id</span> : <span class="ident">sender_id</span> , <span class="ident">opcode</span> : <span class="number">1</span> , <span class="ident">args</span> : <span class="ident">smallvec</span> <span class="op">!</span> [] , } , } } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> (<span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> ,) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Request</span> , () <span class="op">&gt;</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Request::from_raw_c can not be used Client-side.&quot;</span>) } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> (<span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span>) -&gt; <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> (<span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [<span class="ident">wl_argument</span>]) -&gt; <span class="ident">T</span> { <span class="kw">match</span> <span class="self">self</span> { <span class="ident">Request</span> :: <span class="ident">SetGamma</span> { <span class="ident">fd</span> } =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [<span class="ident">wl_argument</span> ; <span class="number">1</span>] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } ; <span class="ident">_args_array</span> [<span class="number">0</span>] . <span class="ident">h</span> <span class="op">=</span> <span class="ident">fd</span> ; <span class="ident">f</span> (<span class="number">0</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span>) } , <span class="ident">Request</span> :: <span class="ident">Destroy</span> =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span> : [<span class="ident">wl_argument</span> ; <span class="number">0</span>] <span class="op">=</span> <span class="kw">unsafe</span> { :: <span class="ident">std</span> :: <span class="ident">mem</span> :: <span class="ident">zeroed</span> () } ; <span class="ident">f</span> (<span class="number">1</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">_args_array</span>) } , } } } # [<span class="ident">derive</span> (<span class="ident">Debug</span>)] # [<span class="ident">non_exhaustive</span>] <span class="kw">pub</span> <span class="kw">enum</span> <span class="ident">Event</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;size of gamma ramps\n\nAdvertise the size of each gamma ramp.\n\nThis event is sent immediately when the gamma control object is created.&quot;</span>] <span class="ident">GammaSize</span> { <span class="ident">size</span> : <span class="ident">u32</span> , } , # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;object no longer valid\n\nThis event indicates that the gamma control is no longer valid. This\ncan happen for a number of reasons, including:\n- The output doesn&#39;t support gamma tables\n- Setting the gamma tables failed\n- Another client already has exclusive gamma control for this output\n- The compositor has transferred gamma control to another client\n\nUpon receiving this event, the client should destroy this object.&quot;</span>] <span class="ident">Failed</span> , } <span class="kw">impl</span> <span class="kw">super</span> :: <span class="ident">MessageGroup</span> <span class="kw">for</span> <span class="ident">Event</span> { <span class="kw">const</span> <span class="ident">MESSAGES</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span>] <span class="op">=</span> <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;gamma_size&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [<span class="kw">super</span> :: <span class="ident">ArgumentType</span> :: <span class="ident">Uint</span> ,] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } , <span class="kw">super</span> :: <span class="ident">MessageDesc</span> { <span class="ident">name</span> : <span class="string">&quot;failed&quot;</span> , <span class="ident">since</span> : <span class="number">1</span> , <span class="ident">signature</span> : <span class="op">&amp;</span> [] , <span class="ident">destructor</span> : <span class="bool-val">false</span> , } ,] ; <span class="kw">type</span> <span class="ident">Map</span> <span class="op">=</span> <span class="kw">super</span> :: <span class="ident">ProxyMap</span> ; <span class="kw">fn</span> <span class="ident">is_destructor</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">bool</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="kw">_</span> =&gt; <span class="bool-val">false</span> , } } <span class="kw">fn</span> <span class="ident">opcode</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u16</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">GammaSize</span> { .. } =&gt; <span class="number">0</span> , <span class="ident">Event</span> :: <span class="ident">Failed</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">since</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="ident">u32</span> { <span class="kw">match</span> <span class="op">*</span> <span class="self">self</span> { <span class="ident">Event</span> :: <span class="ident">GammaSize</span> { .. } =&gt; <span class="number">1</span> , <span class="ident">Event</span> :: <span class="ident">Failed</span> =&gt; <span class="number">1</span> , } } <span class="kw">fn</span> <span class="ident">child</span> <span class="op">&lt;</span> <span class="ident">Meta</span> : <span class="ident">ObjectMetadata</span> <span class="op">&gt;</span> (<span class="ident">opcode</span> : <span class="ident">u16</span> , <span class="ident">version</span> : <span class="ident">u32</span> , <span class="ident">meta</span> : <span class="op">&amp;</span> <span class="ident">Meta</span>) -&gt; <span class="prelude-ty">Option</span> <span class="op">&lt;</span> <span class="ident">Object</span> <span class="op">&lt;</span> <span class="ident">Meta</span> <span class="op">&gt;</span><span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="kw">_</span> =&gt; <span class="prelude-val">None</span> , } } <span class="kw">fn</span> <span class="ident">from_raw</span> (<span class="ident">msg</span> : <span class="ident">Message</span> , <span class="ident">map</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="self">Self</span> :: <span class="ident">Map</span>) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="self">Self</span> , () <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">msg</span> . <span class="ident">opcode</span> { <span class="number">0</span> =&gt; { <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">args</span> <span class="op">=</span> <span class="ident">msg</span> . <span class="ident">args</span> . <span class="ident">into_iter</span> () ; <span class="prelude-val">Ok</span> (<span class="ident">Event</span> :: <span class="ident">GammaSize</span> { <span class="ident">size</span> : { <span class="kw">if</span> <span class="kw">let</span> <span class="prelude-val">Some</span> (<span class="ident">Argument</span> :: <span class="ident">Uint</span> (<span class="ident">val</span>)) <span class="op">=</span> <span class="ident">args</span> . <span class="ident">next</span> () { <span class="ident">val</span> } <span class="kw">else</span> { <span class="kw">return</span> <span class="prelude-val">Err</span> (()) ; } } , }) } , <span class="number">1</span> =&gt; <span class="prelude-val">Ok</span> (<span class="ident">Event</span> :: <span class="ident">Failed</span>) , <span class="kw">_</span> =&gt; <span class="prelude-val">Err</span> (()) , } } <span class="kw">fn</span> <span class="ident">into_raw</span> (<span class="self">self</span> , <span class="ident">sender_id</span> : <span class="ident">u32</span>) -&gt; <span class="ident">Message</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Event::into_raw can not be used Client-side.&quot;</span>) } <span class="kw">unsafe</span> <span class="kw">fn</span> <span class="ident">from_raw_c</span> (<span class="ident">obj</span> : <span class="op">*</span> <span class="kw-2">mut</span> :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">raw</span> :: <span class="ident">c_void</span> , <span class="ident">opcode</span> : <span class="ident">u32</span> , <span class="ident">args</span> : <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_argument</span> ,) -&gt; <span class="prelude-ty">Result</span> <span class="op">&lt;</span> <span class="ident">Event</span> , () <span class="op">&gt;</span> { <span class="kw">match</span> <span class="ident">opcode</span> { <span class="number">0</span> =&gt; { <span class="kw">let</span> <span class="ident">_args</span> <span class="op">=</span> :: <span class="ident">std</span> :: <span class="ident">slice</span> :: <span class="ident">from_raw_parts</span> (<span class="ident">args</span> , <span class="number">1</span>) ; <span class="prelude-val">Ok</span> (<span class="ident">Event</span> :: <span class="ident">GammaSize</span> { <span class="ident">size</span> : <span class="ident">_args</span> [<span class="number">0</span>] . <span class="ident">u</span> , }) } , <span class="number">1</span> =&gt; { <span class="prelude-val">Ok</span> (<span class="ident">Event</span> :: <span class="ident">Failed</span>) } , <span class="kw">_</span> =&gt; <span class="kw">return</span> <span class="prelude-val">Err</span> (()) , } } <span class="kw">fn</span> <span class="ident">as_raw_c_in</span> <span class="op">&lt;</span> <span class="ident">F</span> , <span class="ident">T</span> <span class="op">&gt;</span> (<span class="self">self</span> , <span class="ident">f</span> : <span class="ident">F</span>) -&gt; <span class="ident">T</span> <span class="kw">where</span> <span class="ident">F</span> : <span class="ident">FnOnce</span> (<span class="ident">u32</span> , <span class="op">&amp;</span> <span class="kw-2">mut</span> [<span class="ident">wl_argument</span>]) -&gt; <span class="ident">T</span> { <span class="ident">panic</span> <span class="op">!</span> (<span class="string">&quot;Event::as_raw_c_in can not be used Client-side.&quot;</span>) } } # [<span class="ident">derive</span> (<span class="ident">Clone</span> , <span class="ident">Eq</span> , <span class="ident">PartialEq</span>)] <span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">ZwlrGammaControlV1</span> (<span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZwlrGammaControlV1</span> <span class="op">&gt;</span>) ; <span class="kw">impl</span> <span class="ident">AsRef</span> <span class="op">&lt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZwlrGammaControlV1</span> <span class="op">&gt;</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ZwlrGammaControlV1</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">as_ref</span> (<span class="op">&amp;</span> <span class="self">self</span>) -&gt; <span class="op">&amp;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="self">Self</span> <span class="op">&gt;</span> { <span class="op">&amp;</span> <span class="self">self</span> . <span class="number">0</span> } } <span class="kw">impl</span> <span class="ident">From</span> <span class="op">&lt;</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZwlrGammaControlV1</span> <span class="op">&gt;</span><span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">ZwlrGammaControlV1</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">from</span> (<span class="ident">value</span> : <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="self">Self</span> <span class="op">&gt;</span>) -&gt; <span class="self">Self</span> { <span class="ident">ZwlrGammaControlV1</span> (<span class="ident">value</span>) } } <span class="kw">impl</span> <span class="ident">From</span> <span class="op">&lt;</span> <span class="ident">ZwlrGammaControlV1</span> <span class="op">&gt;</span> <span class="kw">for</span> <span class="ident">Proxy</span> <span class="op">&lt;</span> <span class="ident">ZwlrGammaControlV1</span> <span class="op">&gt;</span> { # [<span class="ident">inline</span>] <span class="kw">fn</span> <span class="ident">from</span> (<span class="ident">value</span> : <span class="ident">ZwlrGammaControlV1</span>) -&gt; <span class="self">Self</span> { <span class="ident">value</span> . <span class="number">0</span> } } <span class="kw">impl</span> <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="ident">Debug</span> <span class="kw">for</span> <span class="ident">ZwlrGammaControlV1</span> { <span class="kw">fn</span> <span class="ident">fmt</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">f</span> : <span class="op">&amp;</span> <span class="kw-2">mut</span> <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="ident">Formatter</span> <span class="op">&lt;</span> <span class="lifetime">&#39;_</span> <span class="op">&gt;</span>) -&gt; <span class="ident">std</span> :: <span class="ident">fmt</span> :: <span class="prelude-ty">Result</span> { <span class="ident">f</span> . <span class="ident">write_fmt</span> (<span class="ident">format_args</span> <span class="op">!</span> (<span class="string">&quot;{:?}&quot;</span> , <span class="self">self</span> . <span class="number">0</span>)) } } <span class="kw">impl</span> <span class="ident">Interface</span> <span class="kw">for</span> <span class="ident">ZwlrGammaControlV1</span> { <span class="kw">type</span> <span class="ident">Request</span> <span class="op">=</span> <span class="ident">Request</span> ; <span class="kw">type</span> <span class="ident">Event</span> <span class="op">=</span> <span class="ident">Event</span> ; <span class="kw">const</span> <span class="ident">NAME</span> : <span class="op">&amp;</span> <span class="lifetime">&#39;static</span> <span class="ident">str</span> <span class="op">=</span> <span class="string">&quot;zwlr_gamma_control_v1&quot;</span> ; <span class="kw">const</span> <span class="ident">VERSION</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1</span> ; <span class="kw">fn</span> <span class="ident">c_interface</span> () -&gt; <span class="op">*</span> <span class="kw">const</span> <span class="ident">wl_interface</span> { <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_gamma_control_v1_interface</span> } } } <span class="kw">impl</span> <span class="ident">ZwlrGammaControlV1</span> { # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;set the gamma table\n\nSet the gamma table. The file descriptor can be memory-mapped to provide\nthe raw gamma table, which contains successive gamma ramps for the red,\ngreen and blue channels. Each gamma ramp is an array of 16-byte unsigned\nintegers which has the same length as the gamma size.\n\nThe file descriptor data must have the same length as three times the\ngamma size.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">set_gamma</span> (<span class="op">&amp;</span> <span class="self">self</span> , <span class="ident">fd</span> : :: <span class="ident">std</span> :: <span class="ident">os</span> :: <span class="ident">unix</span> :: <span class="ident">io</span> :: <span class="ident">RawFd</span>) -&gt; () { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">SetGamma</span> { <span class="ident">fd</span> : <span class="ident">fd</span> } ; <span class="self">self</span> . <span class="number">0</span> . <span class="ident">send</span> :: <span class="op">&lt;</span> <span class="ident">AnonymousObject</span> <span class="op">&gt;</span> (<span class="ident">msg</span> , <span class="prelude-val">None</span>) ; } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">&quot;destroy this control\n\nDestroys the gamma control object. If the object is still valid, this\nrestores the original gamma tables.\n\nThis is a destructor, you cannot send requests to this object any longer once this method is called.&quot;</span>] <span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">destroy</span> (<span class="op">&amp;</span> <span class="self">self</span> ,) -&gt; () { <span class="kw">let</span> <span class="ident">msg</span> <span class="op">=</span> <span class="ident">Request</span> :: <span class="ident">Destroy</span> ; <span class="self">self</span> . <span class="number">0</span> . <span class="ident">send</span> :: <span class="op">&lt;</span> <span class="ident">AnonymousObject</span> <span class="op">&gt;</span> (<span class="ident">msg</span> , <span class="prelude-val">None</span>) ; } } # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_SET_GAMMA_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this request&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">REQ_DESTROY_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_GAMMA_SIZE_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; The minimal object version supporting this event&quot;</span>] <span class="kw">pub</span> <span class="kw">const</span> <span class="ident">EVT_FAILED_SINCE</span> : <span class="ident">u32</span> <span class="op">=</span> <span class="number">1u32</span> ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C-representation of the messages of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_gamma_control_v1_requests</span> : [<span class="ident">wl_message</span> ; <span class="number">2</span>] <span class="op">=</span> [<span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;set_gamma\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;h\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;destroy\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C-representation of the messages of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_gamma_control_v1_events</span> : [<span class="ident">wl_message</span> ; <span class="number">2</span>] <span class="op">=</span> [<span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;gamma_size\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;u\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } , <span class="ident">wl_message</span> { <span class="ident">name</span> : <span class="string">b&quot;failed\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">signature</span> : <span class="string">b&quot;\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">types</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">types_null</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ,] ; # [<span class="ident">doc</span> <span class="op">=</span> <span class="string">r&quot; C representation of this interface, for interop&quot;</span>] <span class="kw">pub</span> <span class="kw">static</span> <span class="kw-2">mut</span> <span class="ident">zwlr_gamma_control_v1_interface</span> : <span class="ident">wl_interface</span> <span class="op">=</span> <span class="ident">wl_interface</span> { <span class="ident">name</span> : <span class="string">b&quot;zwlr_gamma_control_v1\0&quot;</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">u8</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="ident">c_char</span> , <span class="ident">version</span> : <span class="number">1</span> , <span class="ident">request_count</span> : <span class="number">2</span> , <span class="ident">requests</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_gamma_control_v1_requests</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , <span class="ident">event_count</span> : <span class="number">2</span> , <span class="ident">events</span> : <span class="kw">unsafe</span> { <span class="op">&amp;</span> <span class="ident">zwlr_gamma_control_v1_events</span> <span class="kw">as</span> <span class="op">*</span> <span class="kw">const</span> <span class="kw">_</span> } , } ; }</code></pre></div>
</section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../../../../../../../../../../../" data-current-crate="wayland_protocols" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0 (9d1b2106e 2022-02-23)" ></div>
</body></html>